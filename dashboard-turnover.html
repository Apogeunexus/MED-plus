<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turnover e Rotatividade | RH Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        * { font-family: 'Inter', sans-serif; }
        body { background: #f0f2f5; }
        .card { background: white; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04); transition: all 0.3s ease; border: 1px solid #e5e7eb; }
        .card:hover { box-shadow: 0 10px 25px rgba(0,0,0,0.08); transform: translateY(-2px); }
        .kpi-card { position: relative; overflow: hidden; }
        .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .kpi-blue::before { background: linear-gradient(90deg, #2563eb, #3b82f6); }
        .kpi-green::before { background: linear-gradient(90deg, #10b981, #34d399); }
        .kpi-red::before { background: linear-gradient(90deg, #ef4444, #f87171); }
        .kpi-yellow::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .nav-link { transition: all 0.2s ease; }
        .nav-link:hover { background: rgba(255,255,255,0.15); }
        .nav-link.active { background: rgba(255,255,255,0.2); border-bottom: 2px solid white; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
        .table-row:hover { background: #f9fafb; }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-gradient-to-r from-blue-700 via-blue-600 to-blue-500 text-white shadow-lg">
        <div class="max-w-[1440px] mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg></div>
                    <div>
                        <h1 class="text-xl font-bold tracking-tight">Turnover e Rotatividade</h1>
                        <p class="text-blue-100 text-xs">Análise de Admissões, Desligamentos e Retenção</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm font-medium" id="currentDate"></p>
                    <p class="text-blue-200 text-xs">Última atualização: <span id="updateTime"></span></p>
                </div>
            </div>
        </div>
        <nav class="max-w-[1440px] mx-auto px-6">
            <div class="flex gap-1 overflow-x-auto pb-0">
                <a href="dashboard-executivo.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Executivo</a>
                <a href="dashboard-ponto.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Ponto</a>
                <a href="dashboard-ferias.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Férias</a>
                <a href="dashboard-turnover.html" class="nav-link active px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Turnover</a>
                <a href="dashboard-compliance.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Compliance</a>
                <a href="dashboard-custos.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Custos</a>
                <a href="dashboard-treinamento.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Treinamento</a>
            </div>
        </nav>
    </header>

    <main class="max-w-[1440px] mx-auto px-6 py-6">
        <!-- KPIs -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
            <div class="card kpi-card kpi-red p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Taxa Turnover Mensal</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">2.3%</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-red-500 text-sm font-semibold">▲ 0.4%</span>
                            <span class="text-gray-400 text-xs">vs mês anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-red-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-green p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Admissões no Mês</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">87</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-green-500 text-sm font-semibold">▲ 12</span>
                            <span class="text-gray-400 text-xs">vs mês anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-yellow p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Desligamentos no Mês</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">65</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-red-500 text-sm font-semibold">▲ 8</span>
                            <span class="text-gray-400 text-xs">vs mês anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-yellow-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-blue p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Tempo Médio de Casa</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">8.7 <span class="text-lg font-semibold text-gray-500">meses</span></p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-green-500 text-sm font-semibold">▲ 0.3</span>
                            <span class="text-gray-400 text-xs">vs mês anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                </div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6">
            <!-- Admissões vs Demissões -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Admissões vs Desligamentos — 12 meses</h3>
                <div style="height: 320px;">
                    <canvas id="admDemChart"></canvas>
                </div>
            </div>

            <!-- Motivos de Desligamento -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Motivos de Desligamento</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div style="height: 280px;">
                        <canvas id="motivosChart"></canvas>
                    </div>
                    <div class="space-y-2 flex flex-col justify-center">
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#ef4444"></div>
                            <span class="text-xs text-gray-700 flex-1">Pedido de demissão</span>
                            <span class="text-sm font-bold text-gray-900">35%</span>
                        </div>
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#f59e0b"></div>
                            <span class="text-xs text-gray-700 flex-1">Término de contrato</span>
                            <span class="text-sm font-bold text-gray-900">28%</span>
                        </div>
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#2563eb"></div>
                            <span class="text-xs text-gray-700 flex-1">Dispensa s/ justa causa</span>
                            <span class="text-sm font-bold text-gray-900">18%</span>
                        </div>
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#10b981"></div>
                            <span class="text-xs text-gray-700 flex-1">Acordo mútuo</span>
                            <span class="text-sm font-bold text-gray-900">12%</span>
                        </div>
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#8b5cf6"></div>
                            <span class="text-xs text-gray-700 flex-1">Justa causa</span>
                            <span class="text-sm font-bold text-gray-900">5%</span>
                        </div>
                        <div class="flex items-center gap-2 p-2.5 rounded-lg bg-gray-50">
                            <div class="w-3 h-3 rounded-full" style="background:#6b7280"></div>
                            <span class="text-xs text-gray-700 flex-1">Outros</span>
                            <span class="text-sm font-bold text-gray-900">2%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row 2 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6">
            <!-- Turnover por Cliente -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Turnover por Cliente</h3>
                <div style="height: 340px;">
                    <canvas id="turnoverClienteChart"></canvas>
                </div>
            </div>

            <!-- Tempo de Casa na Saída -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Tempo de Casa no Desligamento</h3>
                <div style="height: 340px;">
                    <canvas id="tempoCasaChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="card p-5">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-base font-bold text-gray-800">Unidades com Maior Turnover</h3>
                <button class="px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700">Exportar</button>
            </div>
            <div class="overflow-x-auto max-h-[400px] overflow-y-auto">
                <table class="w-full">
                    <thead class="sticky top-0 bg-white">
                        <tr class="border-b border-gray-100">
                            <th class="text-left text-xs font-semibold text-gray-500 py-3 px-3">Unidade</th>
                            <th class="text-left text-xs font-semibold text-gray-500 py-3 px-3">Cliente</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Headcount</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Admissões</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Desligamentos</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Turnover</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Tendência</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">JBS - Goiânia</td>
                            <td class="py-3 px-3 text-sm text-gray-600">JBS</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">1.180</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">24</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">18</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-red-100 text-red-700">4.8%</span></td>
                            <td class="py-3 px-3 text-center text-red-500 font-semibold">▲</td>
                        </tr>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">Mag. Luiza - Florianópolis</td>
                            <td class="py-3 px-3 text-sm text-gray-600">Magazine Luiza</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">750</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">15</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">14</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-red-100 text-red-700">3.9%</span></td>
                            <td class="py-3 px-3 text-center text-red-500 font-semibold">▲</td>
                        </tr>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">Vale - Rio de Janeiro</td>
                            <td class="py-3 px-3 text-sm text-gray-600">Vale</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">1.540</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">18</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">15</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-yellow-100 text-yellow-700">3.2%</span></td>
                            <td class="py-3 px-3 text-center text-gray-400 font-semibold">→</td>
                        </tr>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">Ambev - Belo Horizonte</td>
                            <td class="py-3 px-3 text-sm text-gray-600">Ambev</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">1.320</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">12</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">10</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-yellow-100 text-yellow-700">2.7%</span></td>
                            <td class="py-3 px-3 text-center text-green-500 font-semibold">▼</td>
                        </tr>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">Petrobras - São Paulo</td>
                            <td class="py-3 px-3 text-sm text-gray-600">Petrobras</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">1.870</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">8</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">5</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-green-100 text-green-700">1.1%</span></td>
                            <td class="py-3 px-3 text-center text-green-500 font-semibold">▼</td>
                        </tr>
                        <tr class="table-row border-b border-gray-50">
                            <td class="py-3 px-3 text-sm font-medium text-gray-800">Itaú - São Paulo</td>
                            <td class="py-3 px-3 text-sm text-gray-600">Itaú</td>
                            <td class="py-3 px-3 text-sm text-gray-600 text-center">980</td>
                            <td class="py-3 px-3 text-sm text-green-600 text-center font-semibold">5</td>
                            <td class="py-3 px-3 text-sm text-red-600 text-center font-semibold">3</td>
                            <td class="py-3 px-3 text-center"><span class="text-xs font-bold px-2.5 py-1 rounded-full bg-green-100 text-green-700">0.8%</span></td>
                            <td class="py-3 px-3 text-center text-green-500 font-semibold">▼</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <footer class="max-w-[1440px] mx-auto px-6 py-4 text-center">
        <p class="text-xs text-gray-400">RH Analytics © 2025 — Dados atualizados em tempo real</p>
    </footer>

    <script>
        const now = new Date();
        document.getElementById('currentDate').textContent = now.toLocaleDateString('pt-BR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById('updateTime').textContent = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });

        Chart.defaults.font.family = 'Inter';
        Chart.defaults.plugins.legend.labels.usePointStyle = true;
        Chart.defaults.plugins.legend.labels.pointStyle = 'circle';
        Chart.defaults.plugins.tooltip.backgroundColor = '#1f2937';
        Chart.defaults.plugins.tooltip.cornerRadius = 8;
        Chart.defaults.plugins.tooltip.padding = 12;

        // Admissões vs Desligamentos
        new Chart(document.getElementById('admDemChart'), {
            type: 'line',
            data: {
                labels: ['Fev/24','Mar/24','Abr/24','Mai/24','Jun/24','Jul/24','Ago/24','Set/24','Out/24','Nov/24','Dez/24','Jan/25'],
                datasets: [{
                    label: 'Admissões',
                    data: [92, 78, 85, 95, 88, 76, 82, 90, 97, 80, 72, 87],
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16,185,129,0.08)',
                    borderWidth: 3, fill: true, tension: 0.4,
                    pointRadius: 5, pointBackgroundColor: '#10b981', pointBorderColor: '#fff', pointBorderWidth: 2, pointHoverRadius: 8
                },{
                    label: 'Desligamentos',
                    data: [58, 62, 55, 68, 72, 60, 54, 63, 70, 58, 52, 65],
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239,68,68,0.06)',
                    borderWidth: 3, fill: true, tension: 0.4,
                    pointRadius: 5, pointBackgroundColor: '#ef4444', pointBorderColor: '#fff', pointBorderWidth: 2, pointHoverRadius: 8
                },{
                    label: 'Saldo',
                    data: [34, 16, 30, 27, 16, 16, 28, 27, 27, 22, 20, 22],
                    borderColor: '#2563eb',
                    borderWidth: 2, borderDash: [5,3], fill: false, tension: 0.4,
                    pointRadius: 3, pointBackgroundColor: '#2563eb', pointBorderColor: '#fff', pointBorderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { position: 'top', align: 'end' },
                    tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y} colaboradores` } }
                },
                scales: {
                    y: { grid: { color: '#f3f4f6' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // Motivos
        new Chart(document.getElementById('motivosChart'), {
            type: 'doughnut',
            data: {
                labels: ['Pedido de demissão','Término de contrato','Dispensa s/ justa causa','Acordo mútuo','Justa causa','Outros'],
                datasets: [{
                    data: [35, 28, 18, 12, 5, 2],
                    backgroundColor: ['#ef4444','#f59e0b','#2563eb','#10b981','#8b5cf6','#6b7280'],
                    borderWidth: 0, hoverOffset: 8
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                cutout: '55%',
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => `${ctx.label}: ${ctx.parsed}%` } }
                }
            }
        });

        // Turnover por Cliente
        new Chart(document.getElementById('turnoverClienteChart'), {
            type: 'bar',
            data: {
                labels: ['JBS','Mag. Luiza','Vale','Ambev','Bradesco','Natura','B3','Embraer','Petrobras','Itaú'],
                datasets: [{
                    label: 'Turnover %',
                    data: [4.8, 3.9, 3.2, 2.7, 2.4, 2.1, 1.8, 1.5, 1.1, 0.8],
                    backgroundColor: ctx => {
                        const v = ctx.parsed.y;
                        if (v > 3.5) return '#ef4444';
                        if (v > 2.5) return '#f59e0b';
                        return '#10b981';
                    },
                    borderRadius: 6, borderSkipped: false
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => `Turnover: ${ctx.parsed.y}%` } }
                },
                scales: {
                    y: { grid: { color: '#f3f4f6' }, ticks: { callback: v => v + '%' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // Tempo de Casa
        new Chart(document.getElementById('tempoCasaChart'), {
            type: 'bar',
            data: {
                labels: ['0-3 meses','3-6 meses','6-12 meses','1-2 anos','2-3 anos','3-5 anos','5+ anos'],
                datasets: [{
                    label: 'Desligamentos',
                    data: [145, 187, 210, 165, 98, 54, 23],
                    backgroundColor: ['#fca5a5','#fcd34d','#93c5fd','#86efac','#a5b4fc','#c4b5fd','#d1d5db'],
                    borderRadius: 6, borderSkipped: false
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => `${ctx.parsed.y} desligamentos (${Math.round(ctx.parsed.y/882*100)}%)` } }
                },
                scales: {
                    y: { grid: { color: '#f3f4f6' } },
                    x: { grid: { display: false } }
                }
            }
        });
    </script>
</body>
</html>
