<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treinamentos | RH Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        * { font-family: 'Inter', sans-serif; }
        body { background: #f0f2f5; }
        .card { background: white; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04); transition: all 0.3s ease; border: 1px solid #e5e7eb; }
        .card:hover { box-shadow: 0 10px 25px rgba(0,0,0,0.08); transform: translateY(-2px); }
        .kpi-card { position: relative; overflow: hidden; }
        .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .kpi-blue::before { background: linear-gradient(90deg, #2563eb, #3b82f6); }
        .kpi-green::before { background: linear-gradient(90deg, #10b981, #34d399); }
        .kpi-red::before { background: linear-gradient(90deg, #ef4444, #f87171); }
        .kpi-yellow::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .nav-link { transition: all 0.2s ease; }
        .nav-link:hover { background: rgba(255,255,255,0.15); }
        .nav-link.active { background: rgba(255,255,255,0.2); border-bottom: 2px solid white; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
        .progress-bar { height: 10px; border-radius: 5px; background: #e5e7eb; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 5px; transition: width 1s ease; }
        .table-row:hover { background: #f9fafb; }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-gradient-to-r from-blue-700 via-blue-600 to-blue-500 text-white shadow-lg">
        <div class="max-w-[1440px] mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg></div>
                    <div>
                        <h1 class="text-xl font-bold tracking-tight">Gestão de Treinamentos</h1>
                        <p class="text-blue-100 text-xs">Capacitação e Desenvolvimento de Pessoas</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm font-medium" id="currentDate"></p>
                    <p class="text-blue-200 text-xs">Última atualização: <span id="updateTime"></span></p>
                </div>
            </div>
        </div>
        <nav class="max-w-[1440px] mx-auto px-6">
            <div class="flex gap-1 overflow-x-auto pb-0">
                <a href="dashboard-executivo.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Executivo</a>
                <a href="dashboard-ponto.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Ponto</a>
                <a href="dashboard-ferias.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Férias</a>
                <a href="dashboard-turnover.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Turnover</a>
                <a href="dashboard-compliance.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Compliance</a>
                <a href="dashboard-custos.html" class="nav-link px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Custos</a>
                <a href="dashboard-treinamento.html" class="nav-link active px-4 py-2.5 text-sm font-medium rounded-t-lg whitespace-nowrap">Treinamento</a>
            </div>
        </nav>
    </header>

    <main class="max-w-[1440px] mx-auto px-6 py-6">
        <!-- KPIs -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
            <div class="card kpi-card kpi-green p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Cobertura de Treinamento</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">87%</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-green-500 text-sm font-semibold">▲ 4%</span>
                            <span class="text-gray-400 text-xs">vs mês anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-blue p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Horas Totais (ano)</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">12.450h</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-green-500 text-sm font-semibold">▲ 18%</span>
                            <span class="text-gray-400 text-xs">vs ano anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-yellow p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Média por Colaborador</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">8.3h</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-green-500 text-sm font-semibold">▲ 1.2h</span>
                            <span class="text-gray-400 text-xs">vs ano anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-yellow-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg></div>
                </div>
            </div>
            <div class="card kpi-card kpi-blue p-5">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm text-gray-500 font-medium">Investimento Total</p>
                        <p class="text-3xl font-extrabold text-gray-900 mt-1">R$ 347k</p>
                        <div class="flex items-center gap-1 mt-2">
                            <span class="text-red-500 text-sm font-semibold">▲ 22%</span>
                            <span class="text-gray-400 text-xs">vs ano anterior</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                </div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6">
            <!-- Treinamentos por Categoria -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Treinamentos por Categoria</h3>
                <div style="height: 340px;">
                    <canvas id="categoriaChart"></canvas>
                </div>
            </div>

            <!-- NRs Obrigatórias -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-5">NRs Obrigatórias — Conformidade</h3>
                <div class="space-y-4 max-h-[340px] overflow-y-auto pr-2">
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <div class="flex items-center gap-2">
                                <span class="text-sm font-medium text-gray-700">NR-6 (EPI)</span>
                            </div>
                            <span class="text-sm font-bold text-green-600">94%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-green-500" style="width:94%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">11.794 / 12.547 colaboradores</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-7 (PCMSO)</span>
                            <span class="text-sm font-bold text-green-600">91%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-green-500" style="width:91%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">11.418 / 12.547 colaboradores</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-10 (Eletricidade)</span>
                            <span class="text-sm font-bold text-yellow-600">78%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-yellow-500" style="width:78%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">1.248 / 1.600 colaboradores expostos</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-12 (Máquinas)</span>
                            <span class="text-sm font-bold text-yellow-600">82%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-yellow-500" style="width:82%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">1.886 / 2.300 colaboradores expostos</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-18 (Construção)</span>
                            <span class="text-sm font-bold text-green-600">88%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-green-500" style="width:88%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">704 / 800 colaboradores expostos</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-33 (Espaço Confinado)</span>
                            <span class="text-sm font-bold text-red-600">65%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-red-500" style="width:65%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">325 / 500 colaboradores expostos</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">NR-35 (Trabalho em Altura)</span>
                            <span class="text-sm font-bold text-red-600">72%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-red-500" style="width:72%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">864 / 1.200 colaboradores expostos</p>
                    </div>
                    <div>
                        <div class="flex items-center justify-between mb-1.5">
                            <span class="text-sm font-medium text-gray-700">CIPA (NR-5)</span>
                            <span class="text-sm font-bold text-green-600">96%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill bg-green-500" style="width:96%"></div></div>
                        <p class="text-xs text-gray-400 mt-1">384 / 400 membros CIPA</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row 2 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6">
            <!-- Evolução de Horas -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Evolução de Horas de Treinamento</h3>
                <div style="height: 300px;">
                    <canvas id="evolucaoHorasChart"></canvas>
                </div>
            </div>

            <!-- Investimento -->
            <div class="card p-5">
                <h3 class="text-base font-bold text-gray-800 mb-4">Investimento por Tipo</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div style="height: 230px;">
                        <canvas id="investimentoChart"></canvas>
                    </div>
                    <div class="space-y-2 flex flex-col justify-center">
                        <div class="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background:#2563eb"></div>
                                <span class="text-xs text-gray-700">NR Obrigatórias</span>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ 145k</span>
                        </div>
                        <div class="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background:#10b981"></div>
                                <span class="text-xs text-gray-700">Integração</span>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ 78k</span>
                        </div>
                        <div class="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background:#f59e0b"></div>
                                <span class="text-xs text-gray-700">Comportamental</span>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ 56k</span>
                        </div>
                        <div class="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background:#8b5cf6"></div>
                                <span class="text-xs text-gray-700">Técnico</span>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ 42k</span>
                        </div>
                        <div class="flex items-center justify-between p-2.5 bg-gray-50 rounded-lg">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full" style="background:#6b7280"></div>
                                <span class="text-xs text-gray-700">Outros</span>
                            </div>
                            <span class="text-sm font-bold text-gray-900">R$ 26k</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="card p-5">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <h3 class="text-base font-bold text-gray-800">Colaboradores com Treinamentos Vencidos</h3>
                    <span class="bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full" style="animation: pulse 2s infinite;">156</span>
                </div>
                <div class="flex gap-2">
                    <input type="text" placeholder="Buscar..." class="text-sm border border-gray-200 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500" id="searchInput" onkeyup="filterTable()">
                    <button class="px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700">Exportar</button>
                </div>
            </div>
            <div class="overflow-x-auto max-h-[400px] overflow-y-auto">
                <table class="w-full" id="treinTable">
                    <thead class="sticky top-0 bg-white">
                        <tr class="border-b border-gray-100">
                            <th class="text-left text-xs font-semibold text-gray-500 py-3 px-3 cursor-pointer" onclick="sortTable(0)">Colaborador ↕</th>
                            <th class="text-left text-xs font-semibold text-gray-500 py-3 px-3 cursor-pointer" onclick="sortTable(1)">Unidade ↕</th>
                            <th class="text-left text-xs font-semibold text-gray-500 py-3 px-3 cursor-pointer" onclick="sortTable(2)">Treinamento ↕</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3 cursor-pointer" onclick="sortTable(3)">Vencido em ↕</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3 cursor-pointer" onclick="sortTable(4)">Dias Atraso ↕</th>
                            <th class="text-center text-xs font-semibold text-gray-500 py-3 px-3">Risco</th>
                        </tr>
                    </thead>
                    <tbody id="treinBody"></tbody>
                </table>
            </div>
            <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-100">
                <p class="text-xs text-gray-400">Mostrando <span id="showCount">10</span> de 156 registros</p>
                <div class="flex gap-1">
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">← Anterior</button>
                    <button class="px-3 py-1 text-xs font-medium bg-blue-600 text-white rounded-lg">1</button>
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">2</button>
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">3</button>
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">...</button>
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">16</button>
                    <button class="px-3 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-lg">Próxima →</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="max-w-[1440px] mx-auto px-6 py-4 text-center">
        <p class="text-xs text-gray-400">RH Analytics © 2025 — Dados atualizados em tempo real</p>
    </footer>

    <script>
        const now = new Date();
        document.getElementById('currentDate').textContent = now.toLocaleDateString('pt-BR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById('updateTime').textContent = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });

        Chart.defaults.font.family = 'Inter';
        Chart.defaults.plugins.legend.labels.usePointStyle = true;
        Chart.defaults.plugins.legend.labels.pointStyle = 'circle';
        Chart.defaults.plugins.tooltip.backgroundColor = '#1f2937';
        Chart.defaults.plugins.tooltip.cornerRadius = 8;
        Chart.defaults.plugins.tooltip.padding = 12;

        // Treinamentos por Categoria
        new Chart(document.getElementById('categoriaChart'), {
            type: 'bar',
            data: {
                labels: ['NR Obrigatórias','Integração','Segurança','Comportamental','Técnico','Liderança','LGPD','Qualidade'],
                datasets: [{
                    label: 'Realizados',
                    data: [4200, 2100, 1800, 1400, 1200, 800, 600, 350],
                    backgroundColor: '#2563eb',
                    borderRadius: 6, borderSkipped: false
                },{
                    label: 'Pendentes',
                    data: [680, 340, 250, 180, 150, 120, 80, 50],
                    backgroundColor: '#fca5a5',
                    borderRadius: 6, borderSkipped: false
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', align: 'end' },
                    tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y.toLocaleString('pt-BR')} treinamentos` } }
                },
                scales: {
                    y: { grid: { color: '#f3f4f6' }, ticks: { callback: v => v.toLocaleString('pt-BR') } },
                    x: { grid: { display: false }, ticks: { font: { size: 10 } } }
                }
            }
        });

        // Evolução de Horas
        new Chart(document.getElementById('evolucaoHorasChart'), {
            type: 'line',
            data: {
                labels: ['Fev/24','Mar/24','Abr/24','Mai/24','Jun/24','Jul/24','Ago/24','Set/24','Out/24','Nov/24','Dez/24','Jan/25'],
                datasets: [{
                    label: 'Horas de Treinamento',
                    data: [780, 920, 1050, 980, 1120, 1280, 1150, 1300, 1420, 1100, 870, 1480],
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37,99,235,0.08)',
                    borderWidth: 3, fill: true, tension: 0.4,
                    pointRadius: 5, pointBackgroundColor: '#2563eb', pointBorderColor: '#fff', pointBorderWidth: 2
                },{
                    label: 'Meta Mensal',
                    data: Array(12).fill(1000),
                    borderColor: '#d1d5db',
                    borderWidth: 2, borderDash: [5,3], fill: false,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { position: 'top', align: 'end' },
                    tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y.toLocaleString('pt-BR')}h` } }
                },
                scales: {
                    y: { grid: { color: '#f3f4f6' }, ticks: { callback: v => v.toLocaleString('pt-BR') + 'h' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // Investimento Doughnut
        new Chart(document.getElementById('investimentoChart'), {
            type: 'doughnut',
            data: {
                labels: ['NR Obrigatórias','Integração','Comportamental','Técnico','Outros'],
                datasets: [{
                    data: [145, 78, 56, 42, 26],
                    backgroundColor: ['#2563eb','#10b981','#f59e0b','#8b5cf6','#6b7280'],
                    borderWidth: 0, hoverOffset: 8
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                cutout: '60%',
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => `${ctx.label}: R$ ${ctx.parsed}k` } }
                }
            }
        });

        // Table Data
        const data = [
            ['Carlos Silva','Petrobras SP','NR-35 (Trabalho em Altura)','15/10/2024',108],
            ['Ana Souza','Vale RJ','NR-10 (Eletricidade)','20/11/2024',72],
            ['Pedro Santos','Ambev MG','NR-33 (Espaço Confinado)','01/12/2024',61],
            ['Maria Oliveira','JBS GO','NR-12 (Máquinas)','10/12/2024',52],
            ['João Lima','Itaú SP','Integração','18/12/2024',44],
            ['Fernanda Costa','Bradesco PR','NR-6 (EPI)','22/12/2024',40],
            ['Roberto Gomes','Mag. Luiza SC','NR-35 (Trabalho em Altura)','28/12/2024',34],
            ['Luciana Martins','Natura SP','CIPA','02/01/2025',29],
            ['Fernando Neto','B3 SP','NR-10 (Eletricidade)','08/01/2025',23],
            ['Daniela Ribeiro','Embraer SP','NR-12 (Máquinas)','15/01/2025',16]
        ];

        function renderTable(d) {
            const tbody = document.getElementById('treinBody');
            tbody.innerHTML = '';
            d.forEach(e => {
                const risk = e[4] > 60 ? 'Alto' : e[4] > 30 ? 'Médio' : 'Baixo';
                const rc = e[4] > 60 ? 'bg-red-100 text-red-700' : e[4] > 30 ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700';
                const dc = e[4] > 60 ? 'text-red-600' : e[4] > 30 ? 'text-yellow-600' : 'text-green-600';
                tbody.innerHTML += `
                <tr class="table-row border-b border-gray-50 transition-colors">
                    <td class="py-3 px-3 text-sm font-medium text-gray-800">${e[0]}</td>
                    <td class="py-3 px-3 text-sm text-gray-600">${e[1]}</td>
                    <td class="py-3 px-3 text-sm text-gray-600">${e[2]}</td>
                    <td class="py-3 px-3 text-sm text-gray-500 text-center">${e[3]}</td>
                    <td class="py-3 px-3 text-center"><span class="font-bold text-sm ${dc}">${e[4]} dias</span></td>
                    <td class="py-3 px-3 text-center"><span class="text-xs font-semibold px-2.5 py-1 rounded-full ${rc}">${risk}</span></td>
                </tr>`;
            });
        }
        renderTable(data);

        let sortDir = {};
        function sortTable(col) {
            sortDir[col] = !sortDir[col];
            data.sort((a,b) => {
                const va = typeof a[col] === 'number' ? a[col] : String(a[col]).toLowerCase();
                const vb = typeof b[col] === 'number' ? b[col] : String(b[col]).toLowerCase();
                return sortDir[col] ? (va > vb ? 1 : -1) : (va < vb ? 1 : -1);
            });
            renderTable(data);
        }

        function filterTable() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const f = data.filter(e => e.some(v => String(v).toLowerCase().includes(q)));
            renderTable(f);
            document.getElementById('showCount').textContent = f.length;
        }
    </script>
</body>
</html>
